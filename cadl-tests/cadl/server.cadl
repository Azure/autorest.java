import "@cadl-lang/rest";
import "@cadl-lang/versioning";

using Cadl.Http;
using Cadl.Versioning;

@service({
  title: "Server",
  version: "1.0.0",
})
@server(
  "https://{domain}.{tld}",
  "Httpbin endpoint",
  {
    @doc("second-level domain, use httpbin")
    domain?: string = "httpbin",

    @doc("top-level domain, use org")
    tld?: string = "org",

    @doc("Api Version")
    @path
    ApiVersion: APIVersion,
  }
)
namespace Cadl.Server;

enum Versions {
  v1_0: "v1.0",
}

@knownValues(Versions)
scalar APIVersion extends string;

@route("/status/{code}")
interface ServerOp {
  status(@path code: int32): OkResponse | NoContentResponse;
}

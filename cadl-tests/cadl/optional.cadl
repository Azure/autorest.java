import "@cadl-lang/rest";

using Cadl.Http;

@serviceTitle("Optional")
@serviceVersion("1.0.0")
namespace Cadl.Optional;

model Optional {
  boolean?: boolean = true;
  booleanNullable?: boolean;
  booleanRequired: boolean;
  booleanRequiredNullable: boolean | null;
  string?: string;
  bytes?: bytes;
  int?: int32;
  long?: int64;
  float?: float32;
  double?: float64;
  duration?: duration;
  dateTime?: zonedDateTime;

  stringList?: string[];
  bytesDict?: Map<string, bytes>;
}

@withOptionalProperties
model WithOptional {
  ...Optional
}

@route("/optional")
interface OptionalOp {
  @route("/read")
  op read(
          @header requestHeaderRequired: string,
          @header requestHeaderOptional?: string = "test-header",
          @query booleanRequired: boolean,
          @query booleanNullable?: boolean | null,
          @query booleanRequiredNullable: boolean | null,
          @query string?: string): {
    @header headerRequired: string;
    @header headerOptional? : string;
    @body body?: Optional;
  };

  @route("list")
  op list(): {
    @body body?: WithOptional[]; 
  };
}

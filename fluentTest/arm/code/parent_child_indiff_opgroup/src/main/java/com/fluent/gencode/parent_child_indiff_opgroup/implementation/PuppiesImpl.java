/**
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License. See License.txt in the project root for
 * license information.
 *
 * Code generated by Microsoft (R) AutoRest Code Generator.
 *
 */

package com.fluent.gencode.parent_child_indiff_opgroup.implementation;

import com.microsoft.azure.arm.model.implementation.WrapperImpl;
import com.fluent.gencode.parent_child_indiff_opgroup.Puppies;
import rx.Completable;
import rx.Observable;
import rx.functions.Func1;
import com.microsoft.azure.Page;
import com.fluent.gencode.parent_child_indiff_opgroup.AccessUri;
import com.fluent.gencode.parent_child_indiff_opgroup.GrantAccessData;
import com.fluent.gencode.parent_child_indiff_opgroup.Puppy;

class PuppiesImpl extends WrapperImpl<PuppiesInner> implements Puppies {
    private final Parent_Child_Indiff_OpGroupManager manager;

    PuppiesImpl(Parent_Child_Indiff_OpGroupManager manager) {
        super(manager.inner().puppies());
        this.manager = manager;
    }

    public Parent_Child_Indiff_OpGroupManager manager() {
        return this.manager;
    }

    @Override
    public PuppyImpl define(String name) {
        return wrapModel(name);
    }

    private PuppyImpl wrapModel(PuppyInner inner) {
        return  new PuppyImpl(inner, manager());
    }

    private PuppyImpl wrapModel(String name) {
        return new PuppyImpl(name, this.manager());
    }

    @Override
    public Observable<AccessUri> grantAccessAsync(String resourceGroupName, String dogName, String puppyName, GrantAccessData grantAccessData) {
        PuppiesInner client = this.inner();
        return client.grantAccessAsync(resourceGroupName, dogName, puppyName, grantAccessData)
        .map(new Func1<AccessUriInner, AccessUri>() {
            @Override
            public AccessUri call(AccessUriInner inner) {
                return new AccessUriImpl(inner, manager());
            }
        });
    }

    @Override
    public Completable revokeAccessAsync(String resourceGroupName, String dogName, String puppyName) {
        PuppiesInner client = this.inner();
        return client.revokeAccessAsync(resourceGroupName, dogName, puppyName).toCompletable();
    }

    @Override
    public Observable<Puppy> listByDogAsync(final String resourceGroupName, final String dogName) {
        PuppiesInner client = this.inner();
        return client.listByDogAsync(resourceGroupName, dogName)
        .flatMapIterable(new Func1<Page<PuppyInner>, Iterable<PuppyInner>>() {
            @Override
            public Iterable<PuppyInner> call(Page<PuppyInner> page) {
                return page.items();
            }
        })
        .map(new Func1<PuppyInner, Puppy>() {
            @Override
            public Puppy call(PuppyInner inner) {
                return wrapModel(inner);
            }
        });
    }

    @Override
    public Observable<Puppy> getAsync(String resourceGroupName, String dogName, String puppyName) {
        PuppiesInner client = this.inner();
        return client.getAsync(resourceGroupName, dogName, puppyName)
        .map(new Func1<PuppyInner, Puppy>() {
            @Override
            public Puppy call(PuppyInner inner) {
                return wrapModel(inner);
            }
       });
    }

    @Override
    public Completable deleteAsync(String resourceGroupName, String dogName, String puppyName) {
        PuppiesInner client = this.inner();
        return client.deleteAsync(resourceGroupName, dogName, puppyName).toCompletable();
    }

}

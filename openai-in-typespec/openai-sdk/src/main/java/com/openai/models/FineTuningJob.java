// Code generated by Microsoft (R) TypeSpec Code Generator.

package com.openai.models;

import com.generic.core.annotation.Generated;
import com.generic.core.annotation.Immutable;
import com.generic.json.JsonReader;
import com.generic.json.JsonSerializable;
import com.generic.json.JsonToken;
import com.generic.json.JsonWriter;
import java.io.IOException;
import java.time.Instant;
import java.time.OffsetDateTime;
import java.time.ZoneOffset;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;

/**
 * The FineTuningJob model.
 */
@Immutable
public final class FineTuningJob implements JsonSerializable<FineTuningJob> {
    /*
     * The object identifier, which can be referenced in the API endpoints.
     */
    @Generated
    private final String id;

    /*
     * The object type, which is always "fine_tuning.job".
     */
    @Generated
    private final String object = "fine_tuning.job";

    /*
     * The Unix timestamp (in seconds) for when the fine-tuning job was created.
     */
    @Generated
    private final long createdAt;

    /*
     * The Unix timestamp (in seconds) for when the fine-tuning job was finished. The value will be
     * null if the fine-tuning job is still running.
     */
    @Generated
    private final OffsetDateTime finishedAt;

    /*
     * The base model that is being fine-tuned.
     */
    @Generated
    private final String model;

    /*
     * The name of the fine-tuned model that is being created. The value will be null if the
     * fine-tuning job is still running.
     */
    @Generated
    private final String fineTunedModel;

    /*
     * The organization that owns the fine-tuning job.
     */
    @Generated
    private final String organizationId;

    /*
     * The current status of the fine-tuning job, which can be either `created`, `pending`, `running`,
     * `succeeded`, `failed`, or `cancelled`.
     */
    @Generated
    private final FineTuningJobStatus status;

    /*
     * The hyperparameters used for the fine-tuning job. See the
     * [fine-tuning guide](/docs/guides/fine-tuning) for more details.
     */
    @Generated
    private final FineTuningJobHyperparameters hyperparameters;

    /*
     * The file ID used for training. You can retrieve the training data with the
     * [Files API](/docs/api-reference/files/retrieve-contents).
     */
    @Generated
    private final String trainingFile;

    /*
     * The file ID used for validation. You can retrieve the validation results with the
     * [Files API](/docs/api-reference/files/retrieve-contents).
     */
    @Generated
    private final String validationFile;

    /*
     * The compiled results file ID(s) for the fine-tuning job. You can retrieve the results with the
     * [Files API](/docs/api-reference/files/retrieve-contents).
     */
    @Generated
    private final List<String> resultFiles;

    /*
     * The total number of billable tokens processed by this fine tuning job. The value will be null
     * if the fine-tuning job is still running.
     */
    @Generated
    private final Long trainedTokens;

    /*
     * For fine-tuning jobs that have `failed`, this will contain more information on the cause of the
     * failure.
     */
    @Generated
    private final FineTuningJobError error;

    /**
     * Creates an instance of FineTuningJob class.
     * 
     * @param id the id value to set.
     * @param createdAt the createdAt value to set.
     * @param finishedAt the finishedAt value to set.
     * @param model the model value to set.
     * @param fineTunedModel the fineTunedModel value to set.
     * @param organizationId the organizationId value to set.
     * @param status the status value to set.
     * @param hyperparameters the hyperparameters value to set.
     * @param trainingFile the trainingFile value to set.
     * @param validationFile the validationFile value to set.
     * @param resultFiles the resultFiles value to set.
     * @param trainedTokens the trainedTokens value to set.
     * @param error the error value to set.
     */
    @Generated
    private FineTuningJob(String id, OffsetDateTime createdAt, OffsetDateTime finishedAt, String model,
        String fineTunedModel, String organizationId, FineTuningJobStatus status,
        FineTuningJobHyperparameters hyperparameters, String trainingFile, String validationFile,
        List<String> resultFiles, Long trainedTokens, FineTuningJobError error) {
        this.id = id;
        this.createdAt = createdAt.toEpochSecond();
        this.finishedAt = finishedAt;
        this.model = model;
        this.fineTunedModel = fineTunedModel;
        this.organizationId = organizationId;
        this.status = status;
        this.hyperparameters = hyperparameters;
        this.trainingFile = trainingFile;
        this.validationFile = validationFile;
        this.resultFiles = resultFiles;
        this.trainedTokens = trainedTokens;
        this.error = error;
    }

    /**
     * Get the id property: The object identifier, which can be referenced in the API endpoints.
     * 
     * @return the id value.
     */
    @Generated
    public String getId() {
        return this.id;
    }

    /**
     * Get the object property: The object type, which is always "fine_tuning.job".
     * 
     * @return the object value.
     */
    @Generated
    public String getObject() {
        return this.object;
    }

    /**
     * Get the createdAt property: The Unix timestamp (in seconds) for when the fine-tuning job was created.
     * 
     * @return the createdAt value.
     */
    @Generated
    public OffsetDateTime getCreatedAt() {
        return OffsetDateTime.ofInstant(Instant.ofEpochSecond(this.createdAt), ZoneOffset.UTC);
    }

    /**
     * Get the finishedAt property: The Unix timestamp (in seconds) for when the fine-tuning job was finished. The
     * value will be
     * null if the fine-tuning job is still running.
     * 
     * @return the finishedAt value.
     */
    @Generated
    public OffsetDateTime getFinishedAt() {
        return this.finishedAt;
    }

    /**
     * Get the model property: The base model that is being fine-tuned.
     * 
     * @return the model value.
     */
    @Generated
    public String getModel() {
        return this.model;
    }

    /**
     * Get the fineTunedModel property: The name of the fine-tuned model that is being created. The value will be null
     * if the
     * fine-tuning job is still running.
     * 
     * @return the fineTunedModel value.
     */
    @Generated
    public String getFineTunedModel() {
        return this.fineTunedModel;
    }

    /**
     * Get the organizationId property: The organization that owns the fine-tuning job.
     * 
     * @return the organizationId value.
     */
    @Generated
    public String getOrganizationId() {
        return this.organizationId;
    }

    /**
     * Get the status property: The current status of the fine-tuning job, which can be either `created`, `pending`,
     * `running`,
     * `succeeded`, `failed`, or `cancelled`.
     * 
     * @return the status value.
     */
    @Generated
    public FineTuningJobStatus getStatus() {
        return this.status;
    }

    /**
     * Get the hyperparameters property: The hyperparameters used for the fine-tuning job. See the
     * [fine-tuning guide](/docs/guides/fine-tuning) for more details.
     * 
     * @return the hyperparameters value.
     */
    @Generated
    public FineTuningJobHyperparameters getHyperparameters() {
        return this.hyperparameters;
    }

    /**
     * Get the trainingFile property: The file ID used for training. You can retrieve the training data with the
     * [Files API](/docs/api-reference/files/retrieve-contents).
     * 
     * @return the trainingFile value.
     */
    @Generated
    public String getTrainingFile() {
        return this.trainingFile;
    }

    /**
     * Get the validationFile property: The file ID used for validation. You can retrieve the validation results with
     * the
     * [Files API](/docs/api-reference/files/retrieve-contents).
     * 
     * @return the validationFile value.
     */
    @Generated
    public String getValidationFile() {
        return this.validationFile;
    }

    /**
     * Get the resultFiles property: The compiled results file ID(s) for the fine-tuning job. You can retrieve the
     * results with the
     * [Files API](/docs/api-reference/files/retrieve-contents).
     * 
     * @return the resultFiles value.
     */
    @Generated
    public List<String> getResultFiles() {
        return this.resultFiles;
    }

    /**
     * Get the trainedTokens property: The total number of billable tokens processed by this fine tuning job. The value
     * will be null
     * if the fine-tuning job is still running.
     * 
     * @return the trainedTokens value.
     */
    @Generated
    public Long getTrainedTokens() {
        return this.trainedTokens;
    }

    /**
     * Get the error property: For fine-tuning jobs that have `failed`, this will contain more information on the cause
     * of the
     * failure.
     * 
     * @return the error value.
     */
    @Generated
    public FineTuningJobError getError() {
        return this.error;
    }

    @Override
    public JsonWriter toJson(JsonWriter jsonWriter) throws IOException {
        jsonWriter.writeStartObject();
        jsonWriter.writeStringField("id", this.id);
        jsonWriter.writeStringField("object", this.object);
        jsonWriter.writeLongField("created_at", this.createdAt);
        jsonWriter.writeStringField("finished_at", Objects.toString(this.finishedAt, null));
        jsonWriter.writeStringField("model", this.model);
        jsonWriter.writeStringField("fine_tuned_model", this.fineTunedModel);
        jsonWriter.writeStringField("organization_id", this.organizationId);
        jsonWriter.writeStringField("status", Objects.toString(this.status, null));
        jsonWriter.writeJsonField("hyperparameters", this.hyperparameters);
        jsonWriter.writeStringField("training_file", this.trainingFile);
        jsonWriter.writeStringField("validation_file", this.validationFile);
        jsonWriter.writeArrayField("result_files", this.resultFiles, (writer, element) -> writer.writeString(element));
        jsonWriter.writeNumberField("trained_tokens", this.trainedTokens);
        jsonWriter.writeJsonField("error", this.error);
        return jsonWriter.writeEndObject();
    }

    /**
     * Reads an instance of FineTuningJob from the JsonReader.
     * 
     * @param jsonReader The JsonReader being read.
     * @return An instance of FineTuningJob if the JsonReader was pointing to an instance of it, or null if it was
     * pointing to JSON null.
     * @throws IllegalStateException If the deserialized JSON object was missing any required properties.
     * @throws IOException If an error occurs while reading the FineTuningJob.
     */
    public static FineTuningJob fromJson(JsonReader jsonReader) throws IOException {
        return jsonReader.readObject(reader -> {
            boolean idFound = false;
            String id = null;
            boolean objectFound = false;
            String object = null;
            boolean createdAtFound = false;
            OffsetDateTime createdAt = null;
            boolean finishedAtFound = false;
            OffsetDateTime finishedAt = null;
            boolean modelFound = false;
            String model = null;
            boolean fineTunedModelFound = false;
            String fineTunedModel = null;
            boolean organizationIdFound = false;
            String organizationId = null;
            boolean statusFound = false;
            FineTuningJobStatus status = null;
            boolean hyperparametersFound = false;
            FineTuningJobHyperparameters hyperparameters = null;
            boolean trainingFileFound = false;
            String trainingFile = null;
            boolean validationFileFound = false;
            String validationFile = null;
            boolean resultFilesFound = false;
            List<String> resultFiles = null;
            boolean trainedTokensFound = false;
            Long trainedTokens = null;
            boolean errorFound = false;
            FineTuningJobError error = null;
            while (reader.nextToken() != JsonToken.END_OBJECT) {
                String fieldName = reader.getFieldName();
                reader.nextToken();

                if ("id".equals(fieldName)) {
                    id = reader.getString();
                    idFound = true;
                } else if ("object".equals(fieldName)) {
                    object = reader.getString();
                    objectFound = true;
                } else if ("created_at".equals(fieldName)) {
                    createdAt = OffsetDateTime.ofInstant(Instant.ofEpochSecond(reader.getLong()), ZoneOffset.UTC);
                    createdAtFound = true;
                } else if ("finished_at".equals(fieldName)) {
                    finishedAt = reader.getNullable(nonNullReader -> OffsetDateTime.parse(nonNullReader.getString()));
                    finishedAtFound = true;
                } else if ("model".equals(fieldName)) {
                    model = reader.getString();
                    modelFound = true;
                } else if ("fine_tuned_model".equals(fieldName)) {
                    fineTunedModel = reader.getString();
                    fineTunedModelFound = true;
                } else if ("organization_id".equals(fieldName)) {
                    organizationId = reader.getString();
                    organizationIdFound = true;
                } else if ("status".equals(fieldName)) {
                    status = FineTuningJobStatus.fromString(reader.getString());
                    statusFound = true;
                } else if ("hyperparameters".equals(fieldName)) {
                    hyperparameters = FineTuningJobHyperparameters.fromJson(reader);
                    hyperparametersFound = true;
                } else if ("training_file".equals(fieldName)) {
                    trainingFile = reader.getString();
                    trainingFileFound = true;
                } else if ("validation_file".equals(fieldName)) {
                    validationFile = reader.getString();
                    validationFileFound = true;
                } else if ("result_files".equals(fieldName)) {
                    resultFiles = reader.readArray(reader1 -> reader1.getString());
                    resultFilesFound = true;
                } else if ("trained_tokens".equals(fieldName)) {
                    trainedTokens = reader.getNullable(JsonReader::getLong);
                    trainedTokensFound = true;
                } else if ("error".equals(fieldName)) {
                    error = FineTuningJobError.fromJson(reader);
                    errorFound = true;
                } else {
                    reader.skipChildren();
                }
            }
            if (idFound && objectFound && createdAtFound && finishedAtFound && modelFound && fineTunedModelFound
                && organizationIdFound && statusFound && hyperparametersFound && trainingFileFound
                && validationFileFound && resultFilesFound && trainedTokensFound && errorFound) {
                FineTuningJob deserializedFineTuningJob
                    = new FineTuningJob(id, createdAt, finishedAt, model, fineTunedModel, organizationId, status,
                        hyperparameters, trainingFile, validationFile, resultFiles, trainedTokens, error);

                return deserializedFineTuningJob;
            }
            List<String> missingProperties = new ArrayList<>();
            if (!idFound) {
                missingProperties.add("id");
            }
            if (!objectFound) {
                missingProperties.add("object");
            }
            if (!createdAtFound) {
                missingProperties.add("created_at");
            }
            if (!finishedAtFound) {
                missingProperties.add("finished_at");
            }
            if (!modelFound) {
                missingProperties.add("model");
            }
            if (!fineTunedModelFound) {
                missingProperties.add("fine_tuned_model");
            }
            if (!organizationIdFound) {
                missingProperties.add("organization_id");
            }
            if (!statusFound) {
                missingProperties.add("status");
            }
            if (!hyperparametersFound) {
                missingProperties.add("hyperparameters");
            }
            if (!trainingFileFound) {
                missingProperties.add("training_file");
            }
            if (!validationFileFound) {
                missingProperties.add("validation_file");
            }
            if (!resultFilesFound) {
                missingProperties.add("result_files");
            }
            if (!trainedTokensFound) {
                missingProperties.add("trained_tokens");
            }
            if (!errorFound) {
                missingProperties.add("error");
            }

            throw new IllegalStateException(
                "Missing required property/properties: " + String.join(", ", missingProperties));
        });
    }
}
